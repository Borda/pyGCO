# vim ft=yaml

# After changing this file, check it on:
#   http://yaml-online-parser.appspot.com/

language: python

sudo: true

python:
  - 2.7
  - 3.4

cache: pip

env:
  - CI_REPORTS=shippable/testresults COVERAGE_REPORTS=shippable/codecoverage

before_install:
#  - mkdir gco_source
  - pip install --upgrade pip
#  - apt-get install freetype*

install:
  - pip install -r requirements.txt
  - pip install pytest nose coverage codecov
#  - make download
#  - make all
#  - make test_wrapper
  - python setup.py build_ext --inplace
#  - python setup.py install

before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

script:
#  - ls *.so
#  - ./test_wrapper
  - python -m pytest
  - coverage run --source=pygco test_examples.py

after_success:
  - echo Build succesful!
  - codecov --token=1aef0194-048a-4c59-a0d1-9408b924c493
  - coverage report